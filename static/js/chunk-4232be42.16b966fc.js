(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4232be42"],{"04b7":function(e,t,r){},"09f4":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,r,i){return e/=i/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e,t){t?document.querySelector(t).scrollTop=e:(document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e)}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,r,o){var s=n(),l=e-s,c=20,u=0;t="undefined"===typeof t?500:t;var d=function e(){u+=c;var n=Math.easeInOutQuad(u,s,l,t);a(n,r),u<t?i(e):o&&"function"===typeof o&&o()};d()}},"0abf":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-form",{attrs:{inline:!0,model:e.search}},[r("el-form-item",{attrs:{label:"关键词"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"藏品编号/藏品名称/发行方/分类名称/合约地址",clearable:""},on:{clear:function(t){return e.getList(1)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(1)}},model:{value:e.search.keywords,callback:function(t){e.$set(e.search,"keywords",t)},expression:"search.keywords"}})],1),r("el-form-item",{attrs:{label:"藏品类型"}},[r("el-select",{attrs:{clearable:""},on:{change:function(t){return e.getList(1)}},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否上架"}},[r("el-select",{attrs:{clearable:""},on:{change:function(t){return e.getList(1)}},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否售罄"}},[r("el-select",{attrs:{clearable:""},on:{change:function(t){return e.getList(1)}},model:{value:e.search.sellout,callback:function(t){e.$set(e.search,"sellout",t)},expression:"search.sellout"}},e._l(e.whetherOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"发表时间"}},[r("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.onChangeDateRange},model:{value:e.dateRangeValue,callback:function(t){e.dateRangeValue=t},expression:"dateRangeValue"}})],1),r("el-form-item",{attrs:{label:"藏品标签"}},[r("el-select",{attrs:{multiple:"",clearable:""},on:{change:function(t){return e.getList(1)}},model:{value:e.search.tags,callback:function(t){e.$set(e.search,"tags",t)},expression:"search.tags"}},e._l(e.tagsOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getList(1)}}},[e._v(" "+e._s(e.$t("table.search"))+" ")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onAddOrUpdate()}}},[e._v(" "+e._s(e.$t("table.add"))+" ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"","highlight-current-row":"",data:e.list}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),r("el-table-column",{attrs:{prop:"images",label:"藏品图片",width:"365","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,a=t.$index;return[e.loading?e._e():r("div",{staticClass:"recommend-page"},[r("swiper",{ref:"mySwiper"+a,attrs:{options:e.swiperOption}},e._l(i.images,(function(t,a){return r("swiper-slide",{key:a,staticClass:"images-list"},[r("el-image",{staticClass:"image-item",attrs:{fit:"contain",src:t&&e.domin+t},on:{click:function(t){return e.onPicturePreview(i.images,a)}}})],1)})),1),i.images.length>3?r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},on:{click:function(t){return e.prev(a)}},slot:"button-prev"}):e._e(),i.images.length>3?r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},on:{click:function(t){return e.next(a)}},slot:"button-next"}):e._e()],1)]}}])}),r("el-table-column",{attrs:{label:"藏品信息","min-width":"180","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",[e._v(" 名称："+e._s(i.name)+" ")]),r("div",[e._v(" 类型："),r("el-tag",{attrs:{type:e._f("paraphrase")(i.type,e.typeOptions,"value","type")}},[e._v(" "+e._s(e._f("paraphrase")(i.type,e.typeOptions))+" ")])],1),r("div",[e._v(" 价格：¥"+e._s(i.cny_price||0)+" ")])]}}])}),r("el-table-column",{attrs:{label:"藏品信息",width:"180","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",[e._v(" 编号："+e._s(i.serial)+" ")]),r("div",[e._v(" 库存："+e._s(i.stock||0)+" ")]),r("div",[e._v(" 已售："+e._s(i.sales_num||0)+" ")]),r("div",[e._v(" 开售："+e._s(i.start_time)+" ")]),r("div",[e._v(" 转赠："+e._s(i.give_time)+" ")]),r("div",[e._v(" 类型： "),r("el-link",{staticClass:"preview-btn",attrs:{underline:!1,type:e._f("paraphrase")(e.goodShowType(i),e.goodShowTypeOptions,"value","type")}},[e._v(e._s(e._f("paraphrase")(e.goodShowType(i),e.goodShowTypeOptions)))])],1),r("div",[e._v(" 同步甘文交："+e._s(i.sync_status?"禁止":"同步")+" ")])]}}])}),r("el-table-column",{attrs:{label:"创作者","min-width":"130","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("el-avatar",{staticStyle:{"flex-shrink":"0"},attrs:{icon:"el-icon-user-solid",src:i.author_avatar?e.domin+i.author_avatar:""}}),r("div",{staticStyle:{"margin-left":"4px","flex-grow":"1"}},[e._v(e._s(i.author||"-"))])],1)]}}])}),r("el-table-column",{attrs:{label:"链上HASH","min-width":"130","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",[e._v(e._s(i.hash||"-"))])]}}])}),r("el-table-column",{attrs:{label:"商品标签","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row.tags;return e._l(i,(function(t,i){return r("el-tag",{key:i,attrs:{effect:"plain"}},[e._v(e._s(t.name))])}))}}])}),r("el-table-column",{attrs:{width:"70",label:"是否售罄",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.type?r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.onChangeSellOut(i,"sell_out")}},model:{value:i.sell_out,callback:function(t){e.$set(i,"sell_out",t)},expression:"row.sell_out"}}):e._e()]}}])}),r("el-table-column",{attrs:{width:"70",label:"是否展示售罄",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.type?r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.onChangeSellOut(i,"sell_out_show")}},model:{value:i.sell_out_show,callback:function(t){e.$set(i,"sell_out_show",t)},expression:"row.sell_out_show"}}):e._e()]}}])}),r("el-table-column",{attrs:{width:"70",label:"上架状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,a=t.$index;return[0===i.type?r("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.onChangeStatus(i,a)}},model:{value:i.status,callback:function(t){e.$set(i,"status",t)},expression:"row.status"}}):e._e()]}}])}),r("el-table-column",{attrs:{width:"70",label:"是否转赠",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.onChangeSellOut(i,"give_status")}},model:{value:i.give_status,callback:function(t){e.$set(i,"give_status",t)},expression:"row.give_status"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"220",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,a=t.$index;return[r("el-button-group",[[1].includes(i.is_more)?r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.onMoreOrUpdate(i)}}},[e._v("多次销售")]):e._e(),1===i.sell_out&&i.stock>0?r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.onRecycle(i)}}},[e._v("库存回收")]):e._e(),[4].includes(i.type)?e._e():r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onAddOrUpdate(i)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onDelete(i,a)}}},[e._v("删除")])],1)]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pages.total>0,expression:"pages.total > 0"}],attrs:{total:e.pages.total,page:e.pages.current,limit:e.pages.limit},on:{"update:page":function(t){return e.$set(e.pages,"current",t)},"update:limit":function(t){return e.$set(e.pages,"limit",t)},pagination:function(t){return e.getList()}}}),e.addOrUpdateVisible?r("add-or-update",{ref:"addOrUpdate",on:{refreshList:function(t){return e.getList()}}}):e._e(),e.addMoreVisible?r("add-more-list",{ref:"AddMoreList",on:{refreshList:function(t){return e.getList()}}}):e._e(),e.lookAllTagVisible?r("look-all-tag",{ref:"lookAllTag",on:{refreshList:function(t){return e.getList()}}}):e._e(),e.imageViewer?r("el-image-viewer",{attrs:{"z-index":3e3,"on-close":e.closeViewer,"url-list":e.imageViewerList}}):e._e()],1)},a=[],n=r("5530"),o=r("ade3"),s=(r("c740"),r("d81d"),r("b0c0"),r("d3b7"),r("ac1f"),r("841c"),r("99af"),r("fb6a"),r("a434"),r("333d")),l=r("4431"),c=r("5f87"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{top:"30px",width:"1000px",title:e.form.id?e.$t("table.edit"):e.$t("table.add"),visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"160px"}},[e.form.id?e._e():r("div",[r("el-form-item",{attrs:{label:"铸造藏品",prop:"cast_goods_id"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择铸造藏品",disabled:!!e.form.id},on:{change:e.changeCast},model:{value:e.form.cast_goods_id,callback:function(t){e.$set(e.form,"cast_goods_id",t)},expression:"form.cast_goods_id"}},e._l(e.castOptions,(function(t,i){return r("el-option",{key:i,attrs:{label:t.label,value:t.value}},[r("span",[e._v("#"+e._s(t.value))]),r("el-image",{staticClass:"good-img",attrs:{fit:"cover",src:t.image&&e.domin+t.image}}),r("span",[e._v(" "+e._s(t.label)+" ")])],1)})),1)],1),r("el-form-item",{attrs:{label:"铸造藏品库存",prop:""}},[r("el-input-number",{attrs:{disabled:"",precision:0,min:0},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}})],1)],1),r("el-form-item",{attrs:{label:"藏品名称",prop:"name"}},[r("el-input",{attrs:{disabled:"",placeholder:"藏品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"藏品类型",prop:"type"}},[r("el-select",{attrs:{disabled:!!e.form.id,clearable:"",placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),[0].includes(e.form.type)?r("div",[r("el-form-item",{attrs:{label:"资格券藏品",prop:"condition_goods_id"}},[r("el-select",{attrs:{clearable:"",placeholder:"(非必选)"},model:{value:e.form.condition_goods_id,callback:function(t){e.$set(e.form,"condition_goods_id",t)},expression:"form.condition_goods_id"}},e._l(e.conditionOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),r("el-form-item",{attrs:{label:"库存",prop:"stock"}},[r("el-input-number",{attrs:{disabled:!!e.form.id,precision:0,min:0,step:1,placeholder:"请输入库存"},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1),r("el-form-item",{attrs:{label:"预留库存",prop:"reserve_stock"}},[r("el-input-number",{attrs:{disabled:!!e.form.id,max:e.form.stock,precision:0,min:0,step:1,placeholder:"请输入预留库存"},model:{value:e.form.reserve_stock,callback:function(t){e.$set(e.form,"reserve_stock",t)},expression:"form.reserve_stock"}})],1),[0].includes(e.form.type)?r("div",[e.form.id?e._e():r("div",[r("el-form-item",{attrs:{label:"是否多次发售",prop:"is_more"}},[r("el-radio-group",{model:{value:e.form.is_more,callback:function(t){e.$set(e.form,"is_more",t)},expression:"form.is_more"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1),!e.form.id&&[1].includes(e.form.is_more)?r("div",[r("el-form-item",{attrs:{label:"本期发售数量",prop:"total_stock"}},[r("el-input-number",{attrs:{precision:0,min:1,placeholder:"请输入本期发售数量"},model:{value:e.form.total_stock,callback:function(t){e.$set(e.form,"total_stock",t)},expression:"form.total_stock"}})],1)],1):e._e()]):e._e(),r("el-form-item",{attrs:{label:"藏品标签",prop:"tags"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.tagsOptions,(function(t,i){return r("el-option",{key:i,attrs:{disabled:e.form.tags.length>=3,label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"类型",prop:""}},[r("el-radio-group",{attrs:{disabled:""},on:{change:e.handleTypeChange},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},[r("el-radio",{attrs:{label:1}},[e._v("普通")]),r("el-radio",{attrs:{label:2}},[e._v("3D")]),r("el-radio",{attrs:{label:3}},[e._v("视频")])],1)],1),1===e.form.is_three?r("div",["obj"===e.form.three_url.three_type?r("div",[r("el-form-item",{attrs:{label:"上传mtl文件",prop:"three_url.three_mtl"}},[r("custom-upload",{attrs:{"class-name":"","ref-name":"three_url.three_mtl",limit:1,"show-file-list":!0,"file-list":e.mtlList},on:{handleBeforeUpload:e.beforeAvatarUpload3d,handleSuccess:e.handleAvatarSuccess,handleError:e.handleError,handleExceed:e.handleExceed,handleRemove:e.handleRemove,elProgress:e.elProgress}},[r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("点击上传")])],1),[0,1].includes(e.mtlPercentage)?e._e():r("el-progress",{attrs:{percentage:100*e.mtlPercentage}})],1),r("el-form-item",{attrs:{label:"上传obj文件",prop:"three_url.three_obj"}},[r("custom-upload",{attrs:{"class-name":"","ref-name":"three_url.three_obj",limit:1,"show-file-list":!0,"file-list":e.objList},on:{handleBeforeUpload:e.beforeAvatarUpload3d,handleSuccess:e.handleAvatarSuccess,handleError:e.handleError,handleExceed:e.handleExceed,handleRemove:e.handleRemove,elProgress:e.elProgress}},[r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("点击上传")])],1),[0,1].includes(e.objPercentage)?e._e():r("el-progress",{attrs:{percentage:100*e.objPercentage}})],1)],1):e._e(),"gltf"===e.form.three_url.three_type?r("div",[r("el-form-item",{attrs:{label:"上传gltf文件",prop:"three_url.three_gltf"}},[r("custom-upload",{attrs:{"class-name":"","ref-name":"three_url.three_gltf",limit:1,"show-file-list":!0,"file-list":e.gltfList},on:{handleBeforeUpload:e.beforeAvatarUpload3d,handleSuccess:e.handleAvatarSuccess,handleError:e.handleError,handleExceed:e.handleExceed,handleRemove:e.handleRemove,elProgress:e.elProgress}},[r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("点击上传")])],1),[0,1].includes(e.gltfPercentage)?e._e():r("el-progress",{attrs:{percentage:100*e.gltfPercentage}})],1),r("el-form-item",{attrs:{label:"上传bin文件",prop:"three_url.three_bin"}},[r("custom-upload",{attrs:{"class-name":"","ref-name":"three_url.three_bin",limit:1,"show-file-list":!0,"file-list":e.binList},on:{handleBeforeUpload:e.beforeAvatarUpload3d,handleSuccess:e.handleAvatarSuccess,handleError:e.handleError,handleExceed:e.handleExceed,handleRemove:e.handleRemove,elProgress:e.elProgress}},[r("el-button",{attrs:{type:"primary",disabled:""}},[e._v("点击上传")])],1),[0,1].includes(e.binPercentage)?e._e():r("el-progress",{attrs:{percentage:100*e.binPercentage}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"3d渲染image文件",prop:"three_url.three_image"}},[r("div",{staticClass:"filter-list-box"},e._l(e.form.three_url.three_image,(function(t,i){return r("div",{key:i,staticClass:"upload-images"},[r("el-image",{attrs:{src:t&&e.domin+t},on:{click:function(r){return e.onPicturePreview(t)}}})],1)})),0)])],1):e._e(),r("el-form-item",{attrs:{label:"藏品图片",prop:"images"}},[r("div",{staticClass:"filter-list-box"},[e._l(e.form.images,(function(t,i){return r("div",{key:i,staticClass:"upload-images"},[r("el-image",{staticClass:"upload-image",attrs:{src:t&&e.domin+t,fit:"cover"},on:{click:function(r){return e.onPicturePreview(t)}}})],1)})),e.form.images.length?e._e():r("div",{staticClass:"upload-images err-image"},[r("el-image",[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1)],2)]),r("el-form-item",{attrs:{label:"藏品展示图",prop:"show_image"}},[r("div",{staticClass:"filter-list-box"},[e.form.show_image?r("div",{staticClass:"upload-images"},[r("el-image",{staticClass:"upload-image",attrs:{src:e.form.show_image&&e.domin+e.form.show_image,fit:"cover"},on:{click:function(t){return e.onPicturePreview(e.form.author_avatar)}}})],1):r("div",{staticClass:"err-image"},[r("el-image",[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1)])]),r("el-form-item",{attrs:{label:"藏品分类",prop:"cate_id"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.cate_id,callback:function(t){e.$set(e.form,"cate_id",t)},expression:"form.cate_id"}},e._l(e.cateOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"创作者",prop:"author"}},[r("el-input",{attrs:{disabled:"",placeholder:"创作者"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),r("el-form-item",{attrs:{label:"创作者头像",prop:"author_avatar"}},[r("div",{staticClass:"filter-list-box"},[e.form.author_avatar?r("div",{staticClass:"upload-images"},[r("el-image",{staticClass:"upload-image",attrs:{src:e.form.author_avatar&&e.domin+e.form.author_avatar,fit:"cover"},on:{click:function(t){return e.onPicturePreview(e.form.author_avatar)}}})],1):r("div",{staticClass:"err-image"},[r("el-image",[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1)])]),r("el-divider",{attrs:{"content-position":"left"}},[e._v("商品价格")]),r("el-form-item",{attrs:{label:"人民币价格",prop:"cny_price"}},[r("el-input-number",{attrs:{precision:2,min:0,placeholder:"请输入人民币价格"},model:{value:e.form.cny_price,callback:function(t){e.$set(e.form,"cny_price",t)},expression:"form.cny_price"}})],1),r("el-divider"),r("el-form-item",{attrs:{label:"限购数量",prop:"limit_num"}},[r("el-input-number",{attrs:{precision:0,min:1,placeholder:"请输入限购数量"},model:{value:e.form.limit_num,callback:function(t){e.$set(e.form,"limit_num",t)},expression:"form.limit_num"}})],1),r("el-form-item",{attrs:{label:"优先购库存",prop:"prior_stock"}},[r("el-input-number",{attrs:{disabled:!!e.form.id,precision:0,min:0,step:1,placeholder:"请输入优先购库存"},model:{value:e.form.prior_stock,callback:function(t){e.$set(e.form,"prior_stock",t)},expression:"form.prior_stock"}})],1),e.form.id?e._e():r("div",[r("el-form-item",{attrs:{label:"发行方",prop:"issuer"}},[r("el-input",{attrs:{disabled:"",placeholder:"发行方"},model:{value:e.form.issuer,callback:function(t){e.$set(e.form,"issuer",t)},expression:"form.issuer"}})],1)],1),r("el-form-item",{attrs:{label:"是否预告",prop:"is_pre"}},[r("el-radio-group",{model:{value:e.form.is_pre,callback:function(t){e.$set(e.form,"is_pre",t)},expression:"form.is_pre"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),r("el-form-item",{attrs:{label:"是否热卖",prop:"is_hot"}},[r("el-radio-group",{model:{value:e.form.is_hot,callback:function(t){e.$set(e.form,"is_hot",t)},expression:"form.is_hot"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),r("el-form-item",{attrs:{label:"是否上架",prop:"status"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:1}},[e._v("否")]),r("el-radio",{attrs:{label:0}},[e._v("是")])],1)],1),r("el-form-item",{attrs:{label:"能否转赠",prop:"give_status"}},[r("el-radio-group",{model:{value:e.form.give_status,callback:function(t){e.$set(e.form,"give_status",t)},expression:"form.give_status"}},[r("el-radio",{attrs:{label:1}},[e._v("否")]),r("el-radio",{attrs:{label:0}},[e._v("是")])],1)],1),r("el-form-item",{attrs:{label:"同步甘文交",prop:"sync_status"}},[r("el-radio-group",{model:{value:e.form.sync_status,callback:function(t){e.$set(e.form,"sync_status",t)},expression:"form.sync_status"}},[r("el-radio",{attrs:{label:1}},[e._v("禁止")]),r("el-radio",{attrs:{label:0,disabled:0===e.form.sync_qcg_status}},[e._v("同步")])],1)],1),r("el-form-item",{attrs:{label:"开售时间",prop:"start_time"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开售时间","picker-options":e.pickerOptions0,clearable:""},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}})],1),r("el-form-item",{attrs:{label:"转赠时间",prop:"give_time"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"转赠时间","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,clearable:""},model:{value:e.form.give_time,callback:function(t){e.$set(e.form,"give_time",t)},expression:"form.give_time"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{min:0,precision:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),r("el-form-item",{attrs:{label:"权益说明",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",disabled:"",placeholder:"权益说明",rows:4},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"详情说明",prop:"detail"}},[r("el-link",{attrs:{type:"primary",underline:!1,disabled:!e.form.cast_goods_id},on:{click:function(t){return e.onTinymce()}}},[e._v("点击查看")])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.onFormSubmit()}}},[e._v(" "+e._s(e.$t("table.confirm"))+" ")]),r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1),e.imageViewer?r("el-image-viewer",{attrs:{"z-index":3e3,"on-close":e.closeViewer,"url-list":e.imageViewerList}}):e._e(),r("el-dialog",{attrs:{title:"详情说明",width:"800px","append-to-body":"",visible:e.editTinymceVisible},on:{"update:visible":function(t){e.editTinymceVisible=t}}},[r("div",{staticClass:"dialog-img",domProps:{innerHTML:e._s(e.form.detail)}})])],1)},d=[],m=r("2909"),f=(r("d9e2"),r("4de4"),r("caad"),r("7db0"),r("e9c4"),r("1276"),r("5319"),r("a15b"),r("0eef")),p=r("2934"),g=r("2c79"),h=r("08a9"),b=r("3800"),v={name:"AddOrUpdate",components:{CustomUpload:f["a"],ElImageViewer:h["a"]},data:function(){var e=this,t=function(t,r,i){!e.form.id&&e.form.cast_goods_id&&e.form.stock>e.stock?i(new Error("库存不能大于铸造藏品库存")):i()};return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},pickerOptions:b["i"],visible:!1,btnLoading:!1,editTinymceVisible:!1,imageViewer:!1,imageViewerList:[],domin:Object(c["c"])(c["a"]),cateOptions:[],tagsOptions:[],castOptions:[],typeOptions:b["k"].filter((function(e){return!["",2,4].includes(e.value)})),conditionOptions:[],currentName:"",percentage:0,stock:0,percentageObj:0,mtlList:[],objList:[],castList:[],gltfList:[],binList:[],objPercentage:0,mtlPercentage:0,gltfPercentage:0,binPercentage:0,typeValue:1,form:{cast_goods_id:"",id:0,type:"",is_three:0,name:"",cate_id:"",condition_goods_id:"",author:"",author_avatar:"",show_image:"",issuer:"",desc:"",detail:"",start_time:new Date,images:[],cny_price:"",limit_num:"",stock:0,reserve_stock:0,prior_stock:0,tags:[],is_hot:0,is_pre:0,is_more:0,status:0,give_status:0,total_stock:0,serial:"",give_time:"",sync_status:1,three_url:{three_type:"",three_mtl:"",three_obj:"",three_gltf:"",three_bin:"",three_image:[]},sort:""},rules:{cast_goods_id:[{required:!0,message:"请选择铸造藏品",trigger:["blur","change"]}],type:[{required:!0,message:"请选择藏品类型",trigger:["blur","change"]}],tags:[{required:!0,message:"请选择藏品标签",trigger:["blur","change"]}],is_three:[{required:!0,message:"请选择是否展示3D",trigger:["blur","change"]}],"three_url.three_mtl":[{required:!0,message:"请上传mtl文件",trigger:["blur","change"]}],"three_url.three_obj":[{required:!0,message:"请上传obj文件",trigger:["blur","change"]}],"three_url.three_gltf":[{required:!0,message:"请上传gltf文件",trigger:["blur","change"]}],"three_url.three_bin":[{required:!0,message:"请上传bin文件",trigger:["blur","change"]}],"three_url.three_image":[{required:!0,message:"请上传图片文件",trigger:["blur","change"]}],images:[{required:!0,message:"请选择藏品图片",trigger:["blur","change"]}],name:[{required:!0,message:"请输入藏品名称",trigger:["blur","change"]}],cate_id:[{required:!0,message:"请选择藏品分类",trigger:["blur","change"]}],stock:[{required:!0,message:"请输入库存",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}],cny_price:[{required:!0,message:"请输入人民币价格",trigger:["blur","change"]}],author:[{required:!0,message:"请输入创作者",trigger:["blur","change"]}],author_avatar:[{required:!0,message:"请选择创作者头像",trigger:["blur","change"]}],issuer:[{required:!0,message:"请输入发行方",trigger:["blur","change"]}],limit_num:[{required:!0,message:"请输入限购数量",trigger:["blur","change"]}],start_time:[{required:!0,message:"请选择开售时间",trigger:["blur","change"]}],is_more:[{required:!0,message:"请选择是否多次销售",trigger:["blur","change"]}],total_stock:[{required:!0,message:"请输入本期发售数量",trigger:["blur","change"]}],detail:[{required:!0,message:"请输入详情说明",trigger:["blur","change"]}],desc:[{required:!0,message:"请输入权益说明",trigger:["blur","change"]}],give_status:[{required:!0,message:"请选择能否转赠",trigger:["blur","change"]}],reserve_stock:[{required:!0,message:"不能为空",trigger:["blur","change"]}],prior_stock:[{required:!0,message:"不能为空",trigger:["blur","change"]}],is_hot:[{required:!0,message:"请选择是否热销",trigger:["blur","change"]}],sync_status:[{required:!0,message:"请选择能否同步甘文交",trigger:["blur","change"]}],sync_qcg_status:[{required:!0,message:"请选择能否同步奇藏果",trigger:["blur","change"]}]}}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},methods:{init:function(e){this.publicCategorys(),this.tagLists(),this.castLists(),this.conditionLists(),this.visible=!0,e&&(this.form.id=e.id,this.getDetails())},publicCategorys:function(){var e=this;Object(p["j"])().then((function(t){e.cateOptions=t.data.map((function(e){return{label:e.name,value:e.id}}))}))},tagLists:function(){var e=this;Object(p["m"])().then((function(t){e.tagsOptions=t.data.map((function(e){return{label:e.name,value:e.id}}))}))},castLists:function(){var e=this;Object(g["b"])().then((function(t){e.castList=t.data,e.castOptions=t.data.map((function(e){return{label:e.name,value:e.id,image:e.images&&e.images[0]}}))}))},conditionLists:function(){var e=this;Object(l["b"])().then((function(t){var r;(r=e.conditionOptions).push.apply(r,Object(m["a"])(t.data.map((function(e){return{label:e.name,value:e.id}}))))}))},changeCast:function(e){if(this.stock=this.castList.find((function(t){return t.id===e})).stock,this.form=Object.assign(this.form,this.castList.find((function(t){return t.id===e})),{stock:0,id:0}),[1].includes(this.form.is_three)){this.typeValue=2;var t=this.form.three_url.three_mtl,r=this.form.three_url.three_bin,i=this.form.three_url.three_gltf,a=this.form.three_url.three_obj;this.mtlList=[{name:t,url:t}],this.gltfList=[{name:i,url:i}],this.binList=[{name:r,url:r}],this.objList=[{name:a,url:a}]}else[1].includes(this.form.is_video)?this.typeValue=3:this.typeValue=1},getDetails:function(){var e=this;Object(l["e"])(this.form.id).then((function(t){if(e.form=Object.assign(t.data,{tags:t.data.tags.map((function(e){return e.id}))}),[1].includes(t.data.is_three)){e.typeValue=2;var r=e.form.three_url.three_mtl,i=e.form.three_url.three_obj,a=e.form.three_url.three_gltf,n=e.form.three_url.three_bin;e.mtlList=r?[{name:r,url:r}]:[],e.objList=i?[{name:i,url:i}]:[],e.gltfList=a?[{name:a,url:a}]:[],e.binList=n?[{name:n,url:n}]:[]}else[1].includes(t.data.is_video)?e.typeValue=3:(e.typeValue=1,e.form=Object.assign(e.form,{three_url:{three_type:"",three_mtl:"",three_obj:"",three_gltf:"",three_bin:"",three_image:[]}}));t.data.condition_goods&&e.conditionOptions.push({label:t.data.condition_goods.name,value:t.data.condition_goods.id})})).catch((function(){}))},onFormSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.id?e.$confirm("确定对[(#".concat(e.form.id,")]进行修改?"),"编辑",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then((function(){e.hanldaddOrUpdate()})).catch((function(){})):e.hanldaddOrUpdate())}))},handleTypeChange:function(e){switch(e){case 1:this.form.is_three=0,this.form.is_video=0;break;case 2:this.form.is_three=1,this.form.is_video=0;break;case 3:this.form.is_video=1,this.form.is_three=0;break}},hanldaddOrUpdate:function(){var e=this,t=JSON.parse(JSON.stringify(this.form));t.three_url&&"obj"===t.three_type?(delete t.three_url.three_gltf,delete t.three_url.three_bin):t.three_url&&"gltf"===t.three_type&&(delete t.three_url.three_mtl,delete t.three_url.three_obj),this.btnLoading=!0,Object(l["a"])(t).then((function(t){var r=t.msg;e.$message.success(r),e.visible=!1,e.$emit("refreshList")})).catch((function(){e.btnLoading=!1}))},onTinymce:function(e){this.editTinymceVisible=!0},onClose:function(){this.$reset()},onPicturePreview:function(e){this.imageViewerList=[this.domin+e],this.imageViewer=!0},handleRemove:function(e,t){this.form.three_url["three_".concat(e.name.split(".")[1])]="",this["".concat(e.name.split(".")[1],"List")]=[]},closeViewer:function(){this.imageViewer=!1},beforeAvatarUpload3d:function(e,t,r){var i=e.name.split("."),a=e.size/1024/1024<20;return i[i.length-1]!==r.replace("three_url.three_","")?(this.$message.error("上传文件只能是 ".concat(r.replace("three_url.three_","")," 格式!")),void t(!1)):a?(this.currentName=r,void t(!0)):(this.$message.error("上传文件大小不能超过 20M"),void t(!1))},handleAvatarSuccess:function(e,t){if("images"===this.currentName)this.form[this.currentName].push(e.name);else if(this.currentName.indexOf("three_url")>=0)if(this.currentName.indexOf("image")>=0)this.form.three_url.three_image.push(e.name);else{var r=this.currentName.split(".");this.form[r[0]][r[1]]=e.name}else this.form[this.currentName]=e.name},beforeAvatarUpload:function(e,t,r){var i=["image/jpeg","image/jpg","image/png","image/gif"],a=e.size/1024/1024<20;return i.includes(e.type)?a?(this.currentName=r,void t(!0)):(this.$message.error("上传图片大小不能超过 20M"),void t(!1)):(this.$message.error("上传图片只能是 "+i.join(",")+" 格式!"),void t(!1))},handleError:function(){this["".concat(this.currentName.replace("three_url.three_",""),"List")]=[]},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，请删除后在上传")},elProgress:function(e,t,r){this.percentage=e}}},_=v,y=(r("3f89"),r("2877")),k=Object(y["a"])(_,u,d,!1,null,"01780cda",null),w=k.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{top:"30px",width:"1000px",title:"多次发售列表",visible:e.visible},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onAddOrUpdate()}}},[e._v(" "+e._s(e.$t("table.add"))+" ")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{border:"","highlight-current-row":"",data:e.list}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"num",label:"期数",align:"center"}}),r("el-table-column",{attrs:{prop:"total_stock",label:"发售总量",align:"center"}}),r("el-table-column",{attrs:{prop:"stock",label:"库存",align:"center"}}),r("el-table-column",{attrs:{prop:"sales_num",label:"销售量",align:"center"}}),r("el-table-column",{attrs:{prop:"created_at",label:"时间",width:"170","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",[e._v("创建："+e._s(i.created_at))]),r("div",[e._v("开售："+e._s(i.start_time))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.stock>0?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onPutFormSubmit(i)}}},[e._v("编辑")]):e._e()]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pages.total>0,expression:"pages.total > 0"}],attrs:{total:e.pages.total,page:e.pages.current,limit:e.pages.limit},on:{"update:page":function(t){return e.$set(e.pages,"current",t)},"update:limit":function(t){return e.$set(e.pages,"limit",t)},pagination:function(t){return e.getList()}}})],1),e.changeVisible?r("change-more-update",{ref:"changeUpdate",on:{refreshList:function(t){return e.getList()}}}):e._e(),e.moreVisible?r("add-more-or-update",{ref:"addmoreUpdate",on:{refreshList:function(t){return e.getList()}}}):e._e()],1)},x=[],$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"编辑多次发售",visible:e.visible},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100"}},[r("el-form-item",{attrs:{label:"开售时间",prop:"start_time"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开售时间","picker-options":e.pickerOptions0,clearable:""},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}})],1),r("el-form-item",{attrs:{label:"是否售罄",prop:"sell_out"}},[r("el-select",{attrs:{clearable:""},model:{value:e.form.sell_out,callback:function(t){e.$set(e.form,"sell_out",t)},expression:"form.sell_out"}},e._l(e.whetherOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.onFormSubmit()}}},[e._v(" "+e._s(e.$t("table.confirm"))+" ")]),r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1)],1)},L=[],j={name:"ChangeMoreOrUpdate",data:function(){return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},visible:!1,loading:!1,btnLoading:!1,whetherOptions:b["l"].slice(1),form:{id:0,sell_out:0,start_time:new Date},rules:{sell_out:[{required:!0,message:"请选择是否售罄",trigger:["blur","change"]}],start_time:[{required:!0,message:"请选择开售时间",trigger:["blur","change"]}]}}},methods:{init:function(e){this.form.id=e.id,this.visible=!0,e&&(this.form=JSON.parse(JSON.stringify(e)))},onClose:function(){this.$reset()},onFormSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&e.$confirm("确定对[(#".concat(e.form.id,")]进行修改?"),"编辑",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.btnLoading=!0,Object(l["h"])(e.form).then((function(t){var r=t.msg;e.$message.success(r),e.visible=!1,e.$emit("refreshList")})).catch((function(){e.btnLoading=!1}))})).catch((function(){}))}))}}},C=j,S=(r("bfae"),Object(y["a"])(C,$,L,!1,null,"e518d51c",null)),T=S.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"添加",visible:e.visible},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"本期发售数量",prop:"total_stock"}},[r("el-input-number",{attrs:{precision:0,min:1},model:{value:e.form.total_stock,callback:function(t){e.$set(e.form,"total_stock",t)},expression:"form.total_stock"}})],1),r("el-form-item",{attrs:{label:"开售时间",prop:"start_time"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开售时间","picker-options":e.pickerOptions0,clearable:""},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.onFormSubmit()}}},[e._v(" "+e._s(e.$t("table.confirm"))+" ")]),r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1)],1)},P=[],U={name:"AddMoreOrUpdate",data:function(){return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},btnLoading:!1,visible:!1,form:{goods_id:0,total_stock:0,start_time:new Date},rules:{total_stock:[{required:!0,message:"请输入本期发售数量",trigger:["blur","change"]}],start_time:[{required:!0,message:"请选择开售时间",trigger:["blur","change"]}]}}},methods:{init:function(e){this.form.goods_id=e,this.visible=!0},onClose:function(){this.visible=!1,this.$reset()},onFormSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&e.$confirm("确认添加本期发售数量吗？","添加",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["g"])(e.form).then((function(t){var r=t.msg;e.$message.success(r),e.$emit("refreshList")})).catch((function(){})).finally((function(){e.btnLoading=!1,e.visible=!1}))})).catch((function(){e.btnLoading=!1}))}))}}},A=U,q=(r("c49e"),Object(y["a"])(A,V,P,!1,null,"39900746",null)),E=q.exports,M={name:"MoreOrUpdate",components:{Pagination:s["a"],ChangeMoreUpdate:T,AddMoreOrUpdate:E},data:function(){return{visible:!1,loading:!1,changeVisible:!1,moreVisible:!1,goods_id:0,pages:{total:0,limit:20,current:1},list:[]}},methods:{init:function(e){this.goods_id=e.id,this.visible=!0,this.getList()},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pages.current,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading||(this.loading=r,1===t&&(this.pages.current=t),Object(l["f"])({goods_id:this.goods_id}).then((function(t){0===t.code&&(e.list=t.data.data,e.pages.total=t.data.total)})).catch((function(){})).finally((function(){e.loading=!1})))},onClose:function(){this.visible=!1},onPutFormSubmit:function(e){var t=this;this.changeVisible=!0,this.$nextTick((function(){t.$refs.changeUpdate&&t.$refs.changeUpdate.init(e)}))},onAddOrUpdate:function(){var e=this,t=this.goods_id;this.moreVisible=!0,this.$nextTick((function(){e.$refs.addmoreUpdate&&e.$refs.addmoreUpdate.init(t)}))}}},D=M,R=(r("62d6"),Object(y["a"])(D,O,x,!1,null,"1fe141ca",null)),N=R.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"查看链上标识",visible:e.visible},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[r("div",e._l(e.List,(function(t,i){return r("el-tag",{key:i,staticStyle:{"margin-left":"5px"}},[e._v(e._s(t))])})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1)])},B=[],H={name:"LookAllTag",data:function(){return{visible:!1,List:[]}},methods:{init:function(e){this.visible=!0,e&&(this.List=e)},onClose:function(){this.visible=!1,this.List=[]}}},z=H,I=(r("45b9"),Object(y["a"])(z,F,B,!1,null,"6ce6ca0e",null)),J=I.exports,Q=r("7212"),W=(r("bbe3"),r("241b")),G={name:"Collection",components:{LookAllTag:J,AddOrUpdate:w,AddMoreList:N,Pagination:s["a"],ElImageViewer:h["a"],Swiper:Q["Swiper"],SwiperSlide:Q["SwiperSlide"]},data:function(){return{swiperOption:{slidesPerView:3,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},domin:Object(c["c"])(c["a"]),search:{type:"",keywords:"",status:"",sellout:"",start_time:"",end_time:"",tags:[]},pages:{total:0,limit:20,current:1},typeOptions:b["k"],list:[],issuersOptions:[{label:"全部",value:""},{label:"非专区",value:0}],dateRangeValue:[],tagsOptions:[],addOrUpdateVisible:!1,addMoreVisible:!1,lookAllTagVisible:!1,loading:!1,imageViewerList:[],imageViewer:!1,pickerOptions:b["i"],whetherOptions:b["l"],statusOptions:b["j"],goodShowTypeOptions:b["c"]}},computed:{swiper:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.$refs["mySwiper".concat(e)].$swiper}},goodShowType:function(){return function(e){var t=[0,e.is_three,e.is_video].findIndex((function(e){return!!e}));return t>0?t:0}}},created:function(){this.init()},methods:{init:function(){this.getList(),this.tagLists()},dataIssuersLists:function(){var e=this;Object(W["a"])().then((function(t){t.data.map((function(t){e.issuersOptions.push({label:t.name,value:t.id})}))}))},tagLists:function(){var e=this;Object(p["m"])().then((function(t){e.tagsOptions=t.data.map((function(e){return{label:e.name,value:e.id}}))}))},onChangeStatus:function(e){var t=this;Object(l["k"])(e.id,{status:e.status}).then((function(e){var r=e.msg,i=void 0===r?"设置成功":r;t.$message.success(i)})).catch((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"设置失败";e.status=e.status?0:1,t.$message.error(r)}))},onChangeSellOut:function(e,t){var r=this;Object(l["j"])(e.id,Object(o["a"])({},t,e[t])).then((function(e){var t=e.msg,i=void 0===t?"设置成功":t;r.$message.success(i)})).catch((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"设置失败";e[t]=e[t]?0:1,r.$message.error(i)}))},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pages.current,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading||(this.loading=r,Object(l["c"])(Object(n["a"])(Object(n["a"])({page:t},this.search),{},{limit:this.pages.limit,tags:"".concat(this.search.tags)})).then((function(t){0===t.code&&(e.list=t.data.data,e.pages.total=t.data.total)})).catch((function(t){e.$message.error(t.msg)})).finally((function(){e.loading=!1})))},onAddOrUpdate:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate&&t.$refs.addOrUpdate.init(e)}))},onMoreOrUpdate:function(e){var t=this;this.addMoreVisible=!0,this.$nextTick((function(){t.$refs.AddMoreList&&t.$refs.AddMoreList.init(e)}))},lookAll:function(e){var t=this;this.lookAllTagVisible=!0,this.$nextTick((function(){t.$refs.lookAllTag&&t.$refs.lookAllTag.init(e)}))},onChangeDateRange:function(e){Array.isArray(e)?(this.search.start_time=e[0],this.search.end_time=e[1]):(this.search.start_time=this.search.end_time="",this.getList(1))},onPicturePreview:function(e,t){var r=this,i=e.concat(),a=i.slice(t,t+1);i.splice(t,1);var n=a.concat(i).map((function(e){return r.domin+e}));this.imageViewerList=n,this.imageViewer=!0},closeViewer:function(){this.imageViewer=!1},prev:function(e){this.swiper(e).slidePrev()},next:function(e){this.swiper(e).slideNext()},onRecycle:function(e){var t=this;this.$confirm("确定进行[库存回收]操作?","库存回收",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then((function(){Object(l["i"])(e.id).then((function(e){var r=e.msg,i=void 0===r?"库存回收成功":r;t.$message.success(i),t.getList()})).catch((function(){}))})).catch((function(){}))},onDelete:function(e){var t=this;this.$confirm("确定进行[删除]操作?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",cancelButtonClass:"btn-custom-cancel"}).then((function(){Object(l["d"])(e.id).then((function(e){var r=e.msg,i=void 0===r?"删除成功":r;t.$message.success(i),t.init()})).catch((function(){}))})).catch((function(){}))}}},K=G,X=(r("d55e"),Object(y["a"])(K,i,a,!1,null,"7992f314",null));t["default"]=X.exports},"1a58":function(e,t,r){},"241b":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("5530"),r("15fd");var i=r("b775");function a(){return i["a"].get("/issuers/filter")}},"2c79":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return u}));var i=r("15fd"),a=r("b775"),n=["id"];function o(e){return a["a"].get("/goods/cast/list",{params:e})}function s(e){return a["a"].get("/goods/cast/".concat(e))}function l(e){var t=e.id,r=Object(i["a"])(e,n),o="POST",s="/goods/cast";return t>0&&(o="PUT",s+="/".concat(t),r.id=t),Object(a["a"])({url:s,method:o,data:r})}function c(e){return a["a"].delete("/goods/cast/".concat(e))}function u(e){return a["a"].get("/goods/cast/filter",{params:e})}},3123:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r("b775");function a(){return i["a"].get("/token")}},3800:function(e,t,r){"use strict";r.d(t,"h",(function(){return i})),r.d(t,"g",(function(){return a})),r.d(t,"j",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"l",(function(){return s})),r.d(t,"d",(function(){return l})),r.d(t,"k",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return f})),r.d(t,"i",(function(){return p}));var i=[{label:"全部",value:""}],a=[{label:"全部",value:""},{label:"微信",value:"wxpay"},{label:"京东",value:"jdpay"},{label:"支付宝",value:"alipay"},{label:"银行卡",value:"bank"}],n=[{label:"全部",value:""},{label:"上架",value:0},{label:"下架",value:1}],o=[{label:"全部",value:""},{label:"通过",value:1,type:"success"},{label:"失败",value:2,type:"danger"}],s=[{label:"全部",value:""},{label:"否",value:0},{label:"是",value:1}],l=[{label:"一次性",value:"once",type:"warning"},{label:"长期",value:"long",type:"success"},{label:"指定藏品",value:"appoint",type:"primary"}],c=[{label:"全部",value:""},{label:"常规藏品",value:0,type:"primary"},{label:"盲盒藏品",value:1,type:"warning"},{label:"空投藏品",value:2,type:"primary"},{label:"合成藏品",value:3,type:"success"},{label:"资格券",value:5,type:"danger"},{label:"活动藏品",value:7,type:"danger"}],u=[{label:"全部",value:""},{label:"藏品订单",value:"goods",type:"primary"},{label:"盲盒订单",value:"box",type:"warning"}],d=[{label:"全部",value:""},{label:"待付款",value:0,type:"warning"},{label:"待发放",value:1,type:"primary"},{label:"已完成",value:2,type:"success"},{label:"已关闭",value:3,type:"info"},{label:"异常订单",value:4,type:"danger"}],m=[{label:"普通",value:0,type:"info"},{label:"3D",value:1,type:"primary"},{label:"视频",value:2,type:"warning"}],f=[{label:"指定藏品",value:"goods",type:"primary"},{label:"指定专区",value:"issuer",type:"warning"}],p={shortcuts:[{text:"最近24小时",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-864e5),e.$emit("pick",[r,t])}},{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]}},"3f89":function(e,t,r){"use strict";r("04b7")},4431:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"k",(function(){return m})),r.d(t,"j",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return g})),r.d(t,"h",(function(){return h})),r.d(t,"b",(function(){return b})),r.d(t,"i",(function(){return v}));var i=r("5530"),a=r("15fd"),n=r("b775"),o=["id"],s=["id"];function l(e){return n["a"].get("/goods",{params:e})}function c(e){var t=e.id,r=Object(a["a"])(e,o),i="POST",s="/goods";return t>0&&(i="PUT",s+="/".concat(t),r.id=t),Object(n["a"])({url:s,method:i,data:r})}function u(e){return n["a"].get("/goods/".concat(e))}function d(e){return n["a"].delete("/goods/".concat(e))}function m(e,t){return n["a"].put("/goods/".concat(e,"/status"),Object(i["a"])({},t))}function f(e,t){return n["a"].put("/goods/".concat(e),Object(i["a"])({},t))}function p(e){return n["a"].get("/goods/more/list",{params:e})}function g(e){return n["a"].post("/goods/more/store",Object(i["a"])({},e))}function h(e){var t=e.id,r=Object(a["a"])(e,s);return n["a"].put("/goods/more/".concat(t),Object(i["a"])({},r))}function b(e){return n["a"].get("/goods/condition/filter",{params:e})}function v(e){return n["a"].post("goods/".concat(e,"/recycle"))}},"45b9":function(e,t,r){"use strict";r("7b57")},"59eb":function(e,t,r){},"62d6":function(e,t,r){"use strict";r("1a58")},"72bc":function(e,t,r){"use strict";var i=r("d4ec"),a=r("bee2"),n=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("b0c0"),r("ac1f"),r("1276"),r("b680"),function(){function e(t,r){return Object(i["a"])(this,e),this.video=document.createElement("video"),this.video.preload="metadata",this.video.src=URL.createObjectURL(t),this.init(t,r)}return Object(a["a"])(e,[{key:"init",value:function(e,t){var r=this;return new Promise((function(i){var a=r.fileLengthFormat(e.size,t),n=r.getFileType(e.name);"mp4"===n?r.video.onloadedmetadata=function(){window.URL.revokeObjectURL(r.video.src);var e=r.video.duration;i({fileSize:a,duration:e,type:n,height:r.video.videoHeight,width:r.video.videoWidth})}:i({fileSize:a,duration:0,type:n,height:r.video.videoHeight,width:r.video.videoWidth})}))}},{key:"getFileType",value:function(e){var t=e.split("."),r="";return void 0!==t&&(t.length<=1&&e.indexOf("=")>-1?(console.log("输入是文件地址：",t),!1):(r=t[t.length-1],r=r.toLowerCase(),r))}},{key:"fileLengthFormat",value:function(e,t){var r,i=e/1024;if(i>1e3)return this.fileLengthFormat(i,++t);switch(t){case 1:r=i.toFixed(2);break;case 2:r=i.toFixed(2);break;case 3:r=i.toFixed(2);break;case 4:r=i.toFixed(2);break}return+r}}]),e}());t["a"]=n},"7b57":function(e,t,r){},"7db0":function(e,t,r){"use strict";var i=r("23e7"),a=r("b727").find,n=r("44d2"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(o)},b6a1:function(e,t,r){},bfae:function(e,t,r){"use strict";r("59eb")},c49e:function(e,t,r){"use strict";r("b6a1")},ce72:function(e,t,r){},d55e:function(e,t,r){"use strict";r("ce72")}}]);