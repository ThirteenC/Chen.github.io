(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58380f9d"],{"01b4e":function(e,t,a){},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e,t){t?document.querySelector(t).scrollTop=e:(document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e)}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a,o){var l=r(),s=e-l,c=20,u=0;t="undefined"===typeof t?500:t;var d=function e(){u+=c;var r=Math.easeInOutQuad(u,l,s,t);n(r,a),u<t?i(e):o&&"function"===typeof o&&o()};d()}},"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("b64b");function i(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}function n(e,t){if(null==e)return{};var a,n,r=i(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},2953:function(e,t,a){},3123:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("b775");function n(){return i["a"].get("/token")}},3800:function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"g",(function(){return n})),a.d(t,"j",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"l",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"k",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"i",(function(){return p}));var i=[{label:"全部",value:""}],n=[{label:"全部",value:""},{label:"微信",value:"wxpay"},{label:"京东",value:"jdpay"},{label:"支付宝",value:"alipay"},{label:"银行卡",value:"bank"}],r=[{label:"全部",value:""},{label:"上架",value:0},{label:"下架",value:1}],o=[{label:"全部",value:""},{label:"通过",value:1,type:"success"},{label:"失败",value:2,type:"danger"}],l=[{label:"全部",value:""},{label:"否",value:0},{label:"是",value:1}],s=[{label:"一次性",value:"once",type:"warning"},{label:"长期",value:"long",type:"success"},{label:"指定藏品",value:"appoint",type:"primary"}],c=[{label:"全部",value:""},{label:"常规藏品",value:0,type:"primary"},{label:"盲盒藏品",value:1,type:"warning"},{label:"空投藏品",value:2,type:"primary"},{label:"合成藏品",value:3,type:"success"},{label:"资格券",value:5,type:"danger"},{label:"活动藏品",value:7,type:"danger"}],u=[{label:"全部",value:""},{label:"藏品订单",value:"goods",type:"primary"},{label:"盲盒订单",value:"box",type:"warning"}],d=[{label:"全部",value:""},{label:"待付款",value:0,type:"warning"},{label:"待发放",value:1,type:"primary"},{label:"已完成",value:2,type:"success"},{label:"已关闭",value:3,type:"info"},{label:"异常订单",value:4,type:"danger"}],m=[{label:"普通",value:0,type:"info"},{label:"3D",value:1,type:"primary"},{label:"视频",value:2,type:"warning"}],f=[{label:"指定藏品",value:"goods",type:"primary"},{label:"指定专区",value:"issuer",type:"warning"}],p={shortcuts:[{text:"最近24小时",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}},"6a3c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称",clearable:""},on:{clear:function(t){return e.getList(1)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(1)}},model:{value:e.search.keywords,callback:function(t){e.$set(e.search,"keywords",t)},expression:"search.keywords"}})],1),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.onChangeDateRange},model:{value:e.dateRangeValue,callback:function(t){e.dateRangeValue=t},expression:"dateRangeValue"}})],1),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.getList(1)}}},[e._v(" "+e._s(e.$t("table.search"))+" ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onAddOrUpdate()}}},[e._v(" "+e._s(e.$t("table.add"))+" ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.list}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{width:"120",label:"封面图","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"info-wrapper"},[a("el-image",{staticClass:"image-item",attrs:{src:i.cover.filename&&e.domin+i.cover.filename,"preview-src-list":[e.domin+i.cover.filename]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1)]}}])}),a("el-table-column",{attrs:{"min-width":"180",label:"活动标题","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.name)+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"300",label:"目标商品","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"info-wrapper"},[a("el-image",{staticClass:"image-item",attrs:{src:i.goods&&i.goods.images.length>0&&e.domin+i.goods.images[0],"preview-src-list":[i.goods&&i.goods.images.length>0&&e.domin+i.goods.images[0]]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),i.goods?a("div",{staticStyle:{"margin-left":"10px"}},[a("div",[e._v(" #"+e._s(i.goods.id||"")+" ")]),a("div",[e._v(" 商品名称："+e._s(i.goods.name||"")+" ")]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[e._v(" 作者头像： "),a("el-avatar",{staticStyle:{"flex-shrink":"0"},attrs:{icon:"el-icon-user-solid",src:i.goods.author_avatar?e.domin+i.goods.author_avatar:""}})],1),a("div",{staticStyle:{"margin-left":"4px","flex-grow":"1"}},[e._v(" 作者名称："+e._s(i.goods.author||"-"))])]):e._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"num",width:"70",label:"中奖人数",align:"center"}}),a("el-table-column",{attrs:{prop:"integral_price",width:"90",label:"报名价格",align:"center"}}),a("el-table-column",{attrs:{width:"70",label:"资格开关",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(t){return e.onChangeStatus(i)}},model:{value:i.open_status,callback:function(t){e.$set(i,"open_status",t)},expression:"row.open_status"}})]}}])}),a("el-table-column",{attrs:{width:"60",prop:"sort",label:"排序",align:"center"}}),a("el-table-column",{attrs:{width:"70",label:"上架状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("paraphrase")(a.show_status,e.statusOptions))+" ")]}}])}),a("el-table-column",{attrs:{width:"170",label:"活动时间","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(" 开始："+e._s(i.start_time)+" ")]),a("div",[e._v(" 结束："+e._s(i.end_time)+" ")])]}}])}),a("el-table-column",{attrs:{width:"140",prop:"open_time",label:"开奖时间","header-align":"center"}}),a("el-table-column",{attrs:{width:"140",prop:"created_at",label:"创建时间","header-align":"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[[0].includes(i.status)&&+new Date(i.open_time)<+new Date?a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.openActivity(i)}}},[e._v("开奖")]):e._e(),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onAddOrUpdate(i)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onDelete(i)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pages.total>0,expression:"pages.total > 0"}],attrs:{total:e.pages.total,page:e.pages.current,limit:e.pages.limit},on:{"update:page":function(t){return e.$set(e.pages,"current",t)},"update:limit":function(t){return e.$set(e.pages,"limit",t)},pagination:function(t){return e.getList()}}}),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshList:function(t){return e.getList()}}}):e._e()],1)},n=[],r=a("5530"),o=(a("fb6a"),a("d3b7"),a("ac1f"),a("841c"),a("15fd")),l=a("b775"),s=["id"];function c(e){return l["a"].get("/activities",{params:e})}function u(e){var t=e.id,a=Object(o["a"])(e,s),i="POST",n="/activities";return t>0&&(i="PUT",n+="/".concat(t),a.id=t),Object(l["a"])({url:n,method:i,data:a})}function d(e){return l["a"].delete("/activities/".concat(e))}function m(e){return l["a"].get("/activities/goods/filter",{params:e})}function f(e){return l["a"].put("/activities/open/".concat(e))}function p(e){return l["a"].put("/activities/open/status/".concat(e))}var g=a("5f87"),v=a("3800"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{width:"800px",top:"30px",title:e.form.id?e.$t("table.edit"):e.$t("table.add"),visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"封面图",prop:"cover.filename"}},[e.form.id?a("div",[a("img",{directives:[{name:"show",rawName:"v-show",value:e.form.cover.filename,expression:"form.cover.filename"}],staticClass:"avatar",attrs:{src:e.form.cover.filename&&e.domin+e.form.cover.filename}})]):a("custom-upload",{attrs:{"class-name":"avatar-uploader","ref-name":"cover"},on:{handleBeforeUpload:e.beforeAvatarUpload,handleSuccess:e.handleCoverSuccess}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.form.cover.filename,expression:"form.cover.filename"}],staticClass:"avatar",attrs:{src:e.form.cover.filename&&e.domin+e.form.cover.filename}}),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.form.cover.filename,expression:"!form.cover.filename"}],staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{staticClass:"notice"},[e._v(" 注意：建议藏品图片尺寸 750*750px ")])],1),a("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[a("el-input",{attrs:{disabled:!!e.form.id,placeholder:"活动名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"活动类型",prop:"target_type"}},[a("el-select",{attrs:{clearable:"",disabled:!!e.form.id},on:{change:e.changeTargetType},model:{value:e.form.target_type,callback:function(t){e.$set(e.form,"target_type",t)},expression:"form.target_type"}},e._l(e.typeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e.form.target_type?a("div",[a("el-form-item",{attrs:{label:"目标商品",prop:"target_id"}},[a("el-select",{attrs:{filterable:"",clearable:"",disabled:!!e.form.id},model:{value:e.form.target_id,callback:function(t){e.$set(e.form,"target_id",t)},expression:"form.target_id"}},e._l(e.activitiesOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",[e._v("#"+e._s(t.value))]),a("el-image",{staticClass:"good-img",attrs:{fit:"cover",src:t.image&&e.domin+t.image}}),a("span",[e._v(" "+e._s(t.label)+" ")])],1)})),1)],1)],1):e._e(),a("el-form-item",{attrs:{label:"活动时间",prop:"dateRangeValue"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",disabled:!!e.form.id},on:{change:e.onChangeDateRange},model:{value:e.form.dateRangeValue,callback:function(t){e.$set(e.form,"dateRangeValue",t)},expression:"form.dateRangeValue"}})],1),a("el-form-item",{attrs:{label:"开奖时间",prop:"open_time"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开奖时间","picker-options":e.pickerOptions0,disabled:!!e.form.id,clearable:""},model:{value:e.form.open_time,callback:function(t){e.$set(e.form,"open_time",t)},expression:"form.open_time"}})],1),a("el-form-item",{attrs:{label:"中奖人数",prop:"num"}},[a("el-input-number",{attrs:{precision:0,min:0,disabled:!!e.form.id},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1),a("el-form-item",{attrs:{label:"报名价格",prop:"integral_price"}},[a("el-input-number",{attrs:{precision:2,min:0,disabled:!!e.form.id},model:{value:e.form.integral_price,callback:function(t){e.$set(e.form,"integral_price",t)},expression:"form.integral_price"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:0,precision:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"是否上架"}},[a("el-radio-group",{model:{value:e.form.show_status,callback:function(t){e.$set(e.form,"show_status",t)},expression:"form.show_status"}},[a("el-radio",{attrs:{label:0}},[e._v("是")]),a("el-radio",{attrs:{label:1}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"规则说明",prop:"desc"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:10,placeholder:"规则说明",clearable:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",{attrs:{label:"活动详情",prop:"detail"}},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.onTinymce(e.form)}}},[e._v(" 点击编辑 ")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.onFormSubmit()}}},[e._v(" "+e._s(e.$t("table.confirm"))+" ")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1)],1),e.editTinymceVisible?a("edit-tinymce",{ref:"editTinymce",on:{info:e.onInfo}}):e._e()],1)},h=[],y=(a("d9e2"),a("b0c0"),a("e9c4"),a("d81d"),a("caad"),a("a15b"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("0eef")),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{top:"30px",width:"1000px","append-to-body":"",title:"活动详情",visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},closed:function(t){return e.onClose()}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动详情",prop:"info"}},[e.visible?a("tinymce",{attrs:{height:400},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}}):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onFormSubmit()}}},[e._v(" "+e._s(e.$t("table.confirm"))+" ")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(" "+e._s(e.$t("table.cancel"))+" ")])],1)],1)},w=[],k=(a("5319"),a("8256")),x={name:"EditTinymce",components:{Tinymce:k["a"]},data:function(){return{visible:!1,form:{info:""},rules:{info:[{required:!0,message:"请输入内容",trigger:["blur","change"]}]}}},methods:{init:function(e){this.visible=!0,e&&(this.form.info=e.detail)},onFormSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.info=e.form.info.replace(/crossorigin=\"anonymous\"/g,""),e.$emit("info",e.form.info),e.visible=!1)}))},onClose:function(){this.$reset()}}},O=x,$=a("2877"),T=Object($["a"])(O,_,w,!1,null,"1b5a89d4",null),C=T.exports,S=a("ed08"),j={name:"AddOrUpdate",components:{CustomUpload:y["a"],EditTinymce:C},data:function(){var e=this,t=function(t,a,i){Date.parse(e.form.end_time)-Date.parse(e.form.open_time)>0?i(new Error("开奖时间必须在活动结束时间之后")):i()};return{pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},domin:Object(g["c"])(g["a"]),pickerOptions:v["i"],visible:!1,btnLoading:!1,editTinymceVisible:!1,typeOptions:[{label:"盲盒",value:"box"},{label:"藏品",value:"goods"}],currentName:"",activitiesOptions:[],form:{id:0,name:"",cover:{filename:"",height:0,width:0,mime:""},sort:0,show_status:0,dateRangeValue:[],target_id:"",start_time:"",end_time:"",open_time:"",target_type:"",num:0,integral_price:0,desc:"",detail:""},rules:{"cover.filename":[{required:!0,message:"不能为空",trigger:["blur","change"]}],name:[{required:!0,message:"不能为空",trigger:["blur","change"]}],target_type:[{required:!0,message:"不能为空",trigger:["blur","change"]}],dateRangeValue:[{required:!0,message:"请选择时间",trigger:["blur","change"]}],open_time:[{required:!0,message:"请选择开奖时间",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}],num:[{required:!0,message:"不能为空",trigger:["blur","change"]}],integral_price:[{required:!0,message:"不能为空",trigger:["blur","change"]}],desc:[{required:!0,message:"不能为空",trigger:["blur","change"]}],detail:[{required:!0,message:"不能为空",trigger:["blur","change"]}],target_id:[{required:!0,message:"请选择",trigger:["blur","change"]}],sort:[{required:!0,message:"不能为空",trigger:["blur","change"]}]}}},methods:{init:function(e){this.visible=!0,e&&(this.activitiesOptions=[{label:e.goods.name,value:e.goods.id,image:e.goods.images&&e.goods.images[0]}],this.form=Object.assign(JSON.parse(JSON.stringify(e)),{dateRangeValue:[Object(S["e"])(e.start_time),Object(S["e"])(e.end_time)]}))},onChangeDateRange:function(e){Array.isArray(e)?(this.form.start_time=e[0],this.form.end_time=e[1]):this.form.start_time=this.form.end_time=""},changeTargetType:function(){var e=this;this.form.target_id="",m({target_type:this.form.target_type}).then((function(t){e.activitiesOptions=t.data.map((function(e){return{label:e.name,value:e.id,image:e.images&&e.images[0]}}))})).catch((function(){}))},onFormSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.btnLoading=!0,u(e.form).then((function(t){var a=t.msg;e.$message.success(a),e.visible=!1,e.$emit("refreshList")})).catch((function(){e.btnLoading=!1})))}))},onClose:function(){this.$reset()},onTinymce:function(e){var t=this;this.editTinymceVisible=!0,this.$nextTick((function(){t.$refs.editTinymce&&t.$refs.editTinymce.init(e)}))},onInfo:function(e){this.form.detail=e},handleCoverSuccess:function(e,t){this.form[this.currentName].filename=e.name},beforeAvatarUpload:function(e,t,a){var i=this,n=["image/jpeg","image/jpg","image/png","image/gif"],r=e.size/1024/1024<20;return n.includes(e.type)?r?(new Promise((function(t,a){var i=window.URL||window.webkitURL,n=new Image;n.onload=function(){t({width:n.width,height:n.height})},n.onerror=function(){a()},n.src=i.createObjectURL(e)})).then((function(e){i.form.cover.width=e.width,i.form.cover.height=e.height})).catch((function(){})),this.form.cover.mime=e.type,this.currentName=a,void t(!0)):(this.$message.error("上传图片大小不能超过 20M"),void t(!1)):(this.$message.error("上传图片只能是 "+n.join(",")+" 格式!"),void t(!1))}}},L=j,R=(a("94f8"),Object($["a"])(L,b,h,!1,null,"7b5168b8",null)),U=R.exports,D=a("333d"),A={name:"Activities",components:{AddOrUpdate:U,Pagination:D["a"]},data:function(){return{domin:Object(g["c"])(g["a"]),loading:!1,pickerOptions:v["i"],statusOptions:v["j"].slice(1),dateRangeValue:[],list:[],pages:{total:0,limit:20,current:1},search:{start_time:"",end_time:"",keywords:""},addOrUpdateVisible:!1}},created:function(){this.init()},methods:{init:function(){this.getList()},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pages.current,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading||(this.loading=a,1===t&&(this.pages.current=t),c(Object(r["a"])(Object(r["a"])({page:t},this.search),{},{limit:this.pages.limit})).then((function(t){e.list=t.data.data,e.pages.total=t.data.total})).catch((function(){})).finally((function(){e.loading=!1})))},openActivity:function(e){var t=this;this.$confirm("确定对抽奖活动[(#".concat(e.id,")]进行[开奖]操作?"),"开奖",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel"}).then((function(){f(e.id).then((function(e){var a=e.msg,i=void 0===a?"开奖成功":a;t.$message.success(i),t.init()})).catch((function(){t.$message.error("开奖失败")}))})).catch((function(){}))},onDelete:function(e){var t=this;this.$confirm("确定对抽奖活动[(#".concat(e.id,")]进行[删除]操作?"),"删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",cancelButtonClass:"btn-custom-cancel"}).then((function(){d(e.id).then((function(e){var a=e.msg,i=void 0===a?"删除成功":a;t.$message.success(i),t.init()})).catch((function(){t.$message.error("删除失败")}))})).catch((function(){}))},onChangeStatus:function(e){var t=this;p(e.id).then((function(e){var a=e.msg,i=void 0===a?"设置成功":a;t.$message.success(i)})).catch((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"设置失败";e.open_status=!e.open_status,t.$message.error(a)}))},onChangeDateRange:function(e){Array.isArray(e)?(this.search.start_time=e[0],this.search.end_time=e[1]):(this.search.start_time=this.search.end_time="",this.getList(1))},onAddOrUpdate:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate&&t.$refs.addOrUpdate.init(e)}))},onRecordLog:function(e){}}},V=A,q=(a("ad3b"),Object($["a"])(V,i,n,!1,null,"4c6bdd8e",null));t["default"]=q.exports},"72bc":function(e,t,a){"use strict";var i=a("d4ec"),n=a("bee2"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("b0c0"),a("ac1f"),a("1276"),a("b680"),function(){function e(t,a){return Object(i["a"])(this,e),this.video=document.createElement("video"),this.video.preload="metadata",this.video.src=URL.createObjectURL(t),this.init(t,a)}return Object(n["a"])(e,[{key:"init",value:function(e,t){var a=this;return new Promise((function(i){var n=a.fileLengthFormat(e.size,t),r=a.getFileType(e.name);"mp4"===r?a.video.onloadedmetadata=function(){window.URL.revokeObjectURL(a.video.src);var e=a.video.duration;i({fileSize:n,duration:e,type:r,height:a.video.videoHeight,width:a.video.videoWidth})}:i({fileSize:n,duration:0,type:r,height:a.video.videoHeight,width:a.video.videoWidth})}))}},{key:"getFileType",value:function(e){var t=e.split("."),a="";return void 0!==t&&(t.length<=1&&e.indexOf("=")>-1?(console.log("输入是文件地址：",t),!1):(a=t[t.length-1],a=a.toLowerCase(),a))}},{key:"fileLengthFormat",value:function(e,t){var a,i=e/1024;if(i>1e3)return this.fileLengthFormat(i,++t);switch(t){case 1:a=i.toFixed(2);break;case 2:a=i.toFixed(2);break;case 3:a=i.toFixed(2);break;case 4:a=i.toFixed(2);break}return+a}}]),e}());t["a"]=r},"94f8":function(e,t,a){"use strict";a("2953")},ad3b:function(e,t,a){"use strict";a("01b4e")}}]);